<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ixercise</title>
    <!-- 引入bootstarp跟共用css內容========================================= -->
    <link href="../lib/css/styles.css" rel="stylesheet"/>
    <link href="../lib/font/bootstrap-icons.min.css" rel="stylesheet"/>
    <!-- 引入頁籤icon======================================================= -->
    <link rel="icon" type="image/x-icon" href="../lib/img/IX.png"/>
    <!-- 引入sidebar========================================= -->
    <link rel="stylesheet" href="../lib/css/style_jimmy_sidebar2.css">
    <style>
        /* sidebar的<li>當按鈕 */
        .custom-button {
            /* background-color: #f2f2f2; */
            background-color: transparent;
            border: none;
            color: #333;
            padding: 1px 5px;
            font-size: 14px;
            border-radius: 4px;
        }

        .custom-button:hover {
            background-color: #ddd;
        }
    </style>
</head>

<body class="body-color">

<!-- 以下導覽列=================================================================================== -->
<!-- 增加w-100 sticky-top -->
<nav class="navbar navbar-expand-lg navbar-light w-100 sticky-top navbar-color">
    <div class=" container-fluid px-4 px-lg-0 me-4 ">

        <!-- 商標===================================================================== -->
        <a class="navbar-brand m-0 px-4" href="#!">
            <img src="../lib/img/IX-nobackground.png" alt="" width="91" height="60">
        </a>
        <!-- Bootstrap 5 的 Navbar Toggler 按鈕，用於在手機和平板等較小螢幕上，點擊按鈕時切換導覽列的展開和收縮狀態。 -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>

        <!-- 商標的右邊整條============================================================ -->
        <div class="collapse navbar-collapse " id="navbarSupportedContent">

            <ul class="navbar-nav mb-2 mb-lg-0 w-100">
                <!-- 搜尋欄=============================================================== -->
                <!-- <li class="nav-item my-auto">
                    <form class="d-flex">
                        <input class="form-control" type="search" placeholder="找活動..." aria-label="Search">
                        <button class="btn border border-2 border-dark" type="submit">Search</button>
                    </form>
                </li> -->

                <li class="nav-item my-auto">
                    <form class="d-flex ">
                        <input class="form-control" id="searchbar" type="search" placeholder="找活動..."
                               aria-label="Search" data-bs-toggle="collapse" href="#collapseExample" role="button"
                               aria-expanded="false" aria-controls="collapseExample">
                        </input>
                        <button class="btn border border-1 border-dark" type="submit">Search</button>
                    </form>


                    <!-- ================================================================== -->
                    <!-- <div class="collapse" id="collapseExample"> -->
                    <div class="card card-body top-25 start-25 position-fixed d-none" id="searchcard">
                        <div class="container-fluid w-100">
                            <div class="row mb-3">
                                <div class="col-3">
                                    <select class="form-select form-select-sm" aria-label="Default select example">
                                        <option class="disable" selected>頁面</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-select form-select-sm" aria-label="Default select example">
                                        <option selected>Open</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-select form-select-sm" aria-label="Default select example">
                                        <option selected>Open</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-select form-select-sm" aria-label="Default select example">
                                        <option selected>Open</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-3">
                                    <select class="form-select form-select-sm" aria-label="Default select example">
                                        <option selected>Open</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-select form-select-sm" aria-label="Default select example">
                                        <option selected>Open</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-select form-select-sm" aria-label="Default select example">
                                        <option selected>Open</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-select form-select-sm" aria-label="Default select example">
                                        <option selected>Open</option>
                                        <option value="1">One</option>
                                        <option value="2">Two</option>
                                        <option value="3">Three</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- </div> -->
                </li>

                <!-- <div class="collapse  d-block" id="collapseExample">
                </div> -->


                <!-- 辦活動============================================================= -->
                <li class="nav-item fs-5 ms-auto my-auto">
                    <a class="nav-link active h-100 " aria-current="page" href="#!">辦活動
                    </a>
                </li>
                <!-- 其他主頁  ========================================================== -->
                <li class="nav-item fs-5 dropdown my-auto">
                    <a class="nav-link dropdown-toggle navalable" id="navbarDropdown" href="#" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">其他主頁
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">首頁</a></li>
                        <li>
                            <hr class="dropdown-divider"/>
                        </li>
                        <li><a class="dropdown-item" href="#!">商城</a></li>
                        <li><a class="dropdown-item" href="#!">論壇</a></li>
                        <li><a class="dropdown-item" href="#!">活動</a></li>
                    </ul>
                </li>
                <!-- 鈴鐺============================================================= -->
                <!-- 還有一顆填滿的bi-bell-fill -->
                <!-- 操控.n-dot來控制有無紅點 -->
                <li class="nav-item dropdown my-auto">
                    <div class="n-dot"></div>
                    <svg width="36" height="36" fill="currentColor"
                         class="bi bi-bell dropdown-toggle dropdown-toggle" id="navbarDropdown" role="button"
                         data-bs-toggle="dropdown" viewBox="0 0 16 16">
                        <path
                                d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
                    </svg>
                    <ul class="dropdown-menu dropdown-menu-lg-end" aria-labelledby="navbarDropdown">
                        <!-- 一條通知====================================================== -->

                        <div class="list-group">
                            <a href="#" class="list-group-item list-group-item-action" aria-current="true"
                               style="height: 96px; width:600px;">
                                <div class="row h-100">
                                    <div class="col-2 h-100">
                                        <img src="https://picsum.photos/150/200/?random=10"
                                             class="rounded-start h-100 w-100" alt="" style="object-fit:cover">
                                    </div>
                                    <div class="col-10">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h5 class="mb-1">List group item heading</h5>
                                            <small>3 days ago</small>
                                        </div>
                                        <p class="mb-1">Some placeholder content in a paragraph.</p>
                                        <small>And some small print.</small>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="list-group">
                            <a href="#" class="list-group-item list-group-item-action" aria-current="true"
                               style="height: 96px; width:600px;">
                                <div class="row h-100">
                                    <div class="col-2 h-100">
                                        <img src="https://picsum.photos/150/200/?random=10"
                                             class="rounded-start h-100 w-100" alt="" style="object-fit:cover">
                                    </div>
                                    <div class="col-10">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h5 class="mb-1">List group item heading</h5>
                                            <small>3 days ago</small>
                                        </div>
                                        <p class="mb-1">Some placeholder content in a paragraph.</p>
                                        <small>And some small print.</small>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </ul>
                </li>

                <!-- 會員頭像========================================================= -->
                <li class="nav-item dropdown mx-2 my-auto">
                    <img src="https://picsum.photos/300/200/?random=10"
                         class="nav-link dropdown-toggle overflow-hidden rounded-circle p-0" id="navbarDropdown"
                         href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" width="36"
                         height="36">

                    <ul class="dropdown-menu dropdown-menu-lg-end" aria-labelledby="navbarDropdown">

                        <li>
                            <img class="dropdown-item overflow-hidden p-2 rounded-circle"
                                 src="https://picsum.photos/200/200/?random=10" width="150" height="150">
                        </li>
                        <li>
                            <span class="dropdown-item-text justify-content-center d-flex fs-5">名字</span>
                        </li>
                        <li>
                            <hr class="dropdown-divider"/>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#!">查看個人資料</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#!">聊天列表</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <!-- 購物車的按鈕============================================================= -->
            <form class="d-flex">
                <button class="btn btn-outline-dark d-flex text-nowrap" type="submit">
                    <!-- 這個車車改class為bi-cart的話 就會變成空車 -->
                    <i class="bi-cart-fill me-1"></i>
                    購物車
                    <span class="badge bg-dark text-white ms-1 rounded-pill my-auto">0</span>
                </button>
            </form>
        </div>
    </div>
</nav>
<!-- 導覽列結束=================================================================================== -->

<main>
    <!-- sidebar -->
    <div class="wrapper d-flex align-items-stretch" style="position: fixed;height: 100%; top: 12%;z-index: 1000;">
        <nav id="sidebar">
            <!-- 漢堡 -->
            <div class="custom-menu">
                <button type="button" id="sidebarCollapse" class="btn btn-primary">
                    <i class="fa fa-bars"></i>
                    <span class="sr-only">Toggle Menu</span>
                </button>
            </div>
            <div class="p-4">
                <ul class="list-unstyled components mb-5">
                    <li class="active">
                        <div id="bar1"><span class="fa fa-home mr-3"></span>教練課程管理中心</div>
                    </li>
                    <hr>
                    <li>
                        <div id="bar2"><span class="fa fa-user mr-3"></span>課程管理</div>
                        <ul class="sub-list1" style="list-style: none;">
                            <li>
                                <button id="c1" class="custom-button">已開設課程</button>
                            </li>
                            <li>
                                <button id="c2" class="custom-button">已結束課程</button>
                            </li>
                            <li>
                                <button id="c3" class="custom-button">暫存課程</button>
                            </li>
                            <!-- <li>
                                <button id="c4" class="custom-button">被檢舉課程</button>
                            </li> -->
                        </ul>
                    </li>
                    <li>
                        <div id="bar3"><span class="fa fa-briefcase mr-3"></span>學員參加審核</div>
                        <ul class="sub-list2" style="list-style: none;">
                            <li>
                                <button id="audit1" class="custom-button" href="">已審核</button>
                            </li>
                            <li>
                                <button id="audit2" class="custom-button" href="">未審核 <span id="audit2bgsecondary"
                                                                                               class="badge bg-secondary">0</span>
                                </button>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <div id="bar4"><span class="fa fa-sticky-note mr-3"></span>學員退出活動申請</div>
                        <ul class="sub-list2" style="list-style: none;">
                            <li>
                                <button id="leave1" class="custom-button" href="">已審核</button>
                            </li>
                            <li>
                                <button id="leave2" class="custom-button" href="">未審核 <span id="leave2bgsecondary"
                                                                                               class="badge bg-secondary">0</span>
                                </button>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <!-- sidebar -->

    <!-- main-content -->
    <div id="containerplace" class="container main-content">
        <!-- 請在這裡作業 -->
        <div class="row">
            <div id="selecthead1" class="col-12 col-md-3 text-end"></div>
            <div id="selecthead2" class="col-4 col-md-3"></div>
            <div class="col-4 col-md-3"></div>
            <div class="col-4 col-md-3"></div>
            <br>

            <table id="courseList0" class="table">
                <thead style="background-color:rgba(66, 184, 131, 1)">
                <tr>
                    <th></th>
                    <th id="th1">courseID</th>
                    <th id="th2">eventName</th>
                    <th id="th3">courseStartTime</th>
                    <th id="th4">city</th>
                    <th id="th5">categoryID</th>
                    <th id="th6">courseStatus</th>
                    <th id="th7">paidAdvertising</th>
                    <th colspan="2">修改</th>
                </tr>
                </thead>
                <tbody id="aaa">

                </tbody>
            </table>

            <!-- 原長條圖+文字列表，暫時放棄 -->
            <!-- <div class="col-12" style="border: solid black;">
                <div class="row g-0 align-items-center">
                    <div class="col-md-3" style="border: solid purple;">
                        <img src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="..." class="img-fluid">
                    </div>
                    <div class="col-md-9" style="border: solid peru;">
                        <p class="card-tex my-0">學員名字</p>
                        <p class="card-text"><small class="text-muted">寫一下參加原因，心得，台北女、27、有養貓</small>
                        </p>
                        <div style="text-align: right;">
                            <a class="btn btn-primary" href="#" role="button">同意</a>
                            <a class="btn btn-primary" href="#" role="button">不同意</a>
                        </div>
                    </div>
                </div>
            </div> -->


            <!-- Button trigger modal -->
            <!-- <button type="button" class="btn btn-primary col-3 col-md-3" data-bs-toggle="modal"
                data-bs-target="#staticBackdrop">
                Launch static backdrop modal
            </button> -->

            <!-- Modal 創建表單-->
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
                 tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"> <!-- 效果都在這 -->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">修改課程</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body">

                            <!-- 創建表單 -->
                            <div class="container custom-container  px-4 px-lg-5 mt-5">
                                <div class="col -12 row ">
                                    <div class="row col-2"></div>
                                    <div class="col-8 formpad "
                                         style="background-color: #E9E9E9; padding-top: 10px;">
                                        <form id="myform" method="post" enctype="multipart/form-data"
                                              class="row g-3 needs-validation" novalidate>
                                            <!-- image upload ====ccccc===================  -->
                                            <div class="card mt-5 justify-content-center text-center">
                                                <div class="card-body">
                                                    <!-- <div class="form-group "> -->
                                                    <div id="previewBoxDad">
                                                        <div id="previewBox">
                                                            <img id="photo" class="card-img-top event_pic"
                                                                 src="https://media.istockphoto.com/id/1228962068/photo/colorful-autumn-season-and-mountain-fuji-with-morning-fog-and-red-leaves-at-lake-kawaguchiko.jpg?s=612x612&w=0&k=20&c=fsAoWZPMPv0iqwmGLVWginjP_jk3-tVsBCg4ym-e_Js="
                                                                 alt="..."/>
                                                        </div>
                                                        <div id="photoname">photoname</div>
                                                        <label for="photo-dropzone forDhotoDrop">點擊下方更新圖片</label>
                                                        <input type="file" class="form-control-file"
                                                               name="photo-dropzone" id="photo-dropzone"
                                                               aria-describedby="fileHelp" accept="image/*">
                                                        <br>
                                                        <button type="button" class="btn btn-danger"
                                                                id="delete-btn">刪除
                                                        </button>
                                                    </div>
                                                    <!-- </div> -->
                                                </div>
                                            </div>
                                            <!-- image upload ====ccccc===================  -->
                                            <!-- Zero row 之後抓會員的session-->
                                            <div></div>
                                            <br>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <label for="creator" class="form-label">creator</label>
                                                    <div id="creator">會員accountId</div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <label for="courseId" class="form-label">courseId</label>
                                                    <div id="courseId">courseId</div>
                                                </div>
                                                <br>
                                                <!-- First row -->
                                                <div class="row">
                                                    <div class="col-sm-12"></div>
                                                    <label for="event_name" class="form-label">聚會名稱</label>
                                                    <input type="text" id="event_name" name="event_name"
                                                           placeholder="請輸入聚會名稱..." class="form-control"
                                                           value="start your event" required>
                                                    <div class="valid-feedback">
                                                        Looks good!
                                                    </div>
                                                    <div class="invalid-feedback">
                                                        必填!
                                                    </div>
                                                </div>
                                                <hr>
                                                <br>
                                                <!-- Second row -->
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <label for="categoryId" class="form-label">聚會類型</label>
                                                        <select class="form-select" id="categoryId"
                                                                name="categoryId" aria-label="Default select example"
                                                                required>
                                                            <option selected disabled value="">請選擇..</option>
                                                            <option value="1">足球</option>
                                                            <option value="2">籃球</option>
                                                            <option value="3">網球</option>
                                                            <option value="4">排球</option>
                                                            <option value="5">橄欖球</option>
                                                            <option value="6">棒球</option>
                                                            <option value="7">曲棍球</option>
                                                            <option value="8">高爾夫球</option>
                                                            <option value="9">羽毛球</option>
                                                            <option value="10">乒乓球</option>
                                                            <option value="11">壁球</option>
                                                            <option value="12">手球</option>
                                                            <option value="13">保齡球</option>
                                                            <option value="14">有氧操課</option>
                                                            <option value="15">重訓課</option>
                                                            <option value="16">瑜伽課</option>
                                                            <option value="17">舞蹈課</option>
                                                            <option value="18">腹肌課</option>
                                                            <option value="19">動感單車課</option>
                                                            <option value="20">跳繩課</option>
                                                            <option value="21">拳擊課</option>
                                                            <option value="22">跳舞操課</option>
                                                            <option value="23">瑜伽拉伸課</option>
                                                        </select>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label for="city" class="form-label">所在城市</label>
                                                        <select class="form-select" id="city" name="city"
                                                                aria-label="Default select example" required>
                                                            <option selected disabled value="">請選擇..</option>
                                                            <option value="1">台北市</option>
                                                            <option value="2">基隆</option>
                                                            <option value="4">新北市</option>
                                                            <option value="5">宜蘭</option>
                                                            <option value="7">新竹</option>
                                                            <option value="8">桃園</option>
                                                        </select>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label for="district" class="form-label">所在地區</label>
                                                        <select class="form-select" id="district" name="district"
                                                                aria-label="Default select example" required>
                                                            <option selected disabled value="">請選擇..</option>
                                                            <option value="1">Ex.松山區</option>

                                                        </select>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>
                                                <!-- Third row -->
                                                <div class="row">
                                                    <div class="col-sm-8">
                                                        <label class="form-label">場地名稱</label>
                                                        <input type="text" id="location" name="location"
                                                               placeholder="請輸入聚會場地名稱..." class="form-control"
                                                               value=""
                                                               required>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label class="form-label">預計花費</label>
                                                        <input type="number" id="price" name="price" min="0"
                                                               placeholder="預計花費" class="form-control" value="300"
                                                               required>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr>
                                                <br>
                                                <!-- Forth row -->
                                                <div class="row">
                                                    <div class="col-sm-12"></div>
                                                    <label class="form-label">活動地址</label>
                                                    <input type="text" name="address" placeholder="活動地址..."
                                                           class="form-control" id="address" value="" required>
                                                    <div class="invalid-feedback">
                                                        必填!
                                                    </div>
                                                </div>
                                                <br>
                                                <!-- Fith row -->
                                                <div class="row">
                                                    <div class="col-sm-5">
                                                        <label class="form-label">活動日期</label>
                                                        <input type="date" id="eventDate" name="eventDate"
                                                               placeholder="活動日期..." class="form-control"
                                                               value="2023-05-06" required>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <label class="form-label">活動開始時間</label>
                                                        <input type="time" id="startTime" name="startTime"
                                                               placeholder="活動開始時間..." class="form-control"
                                                               required>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>
                                                <!--  row Six -->
                                                <div class="row">
                                                    <div class="col-sm-5">
                                                        <label class="form-label">報名截止日期</label>
                                                        <input type="date" id="lastVerifyDate" name="lastVerifyDate"
                                                               placeholder="報名截止日期..." class="form-control"
                                                               value="2023-05-07" required>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <label class="form-label">報名截止時間</label>
                                                        <input type="time" id="lastVerifyTime" name="lastVerifyTime"
                                                               placeholder="報名截止時間..." class="form-control"
                                                               required>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>
                                                <!-- row  seven ===================================== Javascript ==============================================-->
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <label class="form-label">人數上限</label>
                                                        <input type="number" id="maxAttendees" name="maxAttendees"
                                                               placeholder="聚會人數上限" min="1" max="100"
                                                               class="form-control" value="10" required>
                                                        <div class="invalid-feedback">
                                                            Please write something.
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label class="form-label">課程時長(小時)</label>
                                                        <input type="number" id="courseDuration"
                                                               name="courseDuration" placeholder="課程時長"
                                                               class="form-control" min="0.5" max="24" value="0.5"
                                                               step="0.5" required>
                                                        <div class="invalid-feedback">
                                                            Please write something.
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label class="form-label">付費方式</label>
                                                        <select class="form-select" id="paymentMethod"
                                                                name="paymentMethod" aria-label="Default select example"
                                                                required>
                                                            <option value="" selected disabled>請選擇..</option>
                                                            <option value="1">線上刷卡</option>
                                                            <option value="2">現場繳費</option>
                                                            <option value="3">免費課程</option>
                                                        </select>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>
                                                <!-- row eight -->
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <label for="description">聚會描述和備註</label>
                                                            <textarea class="form-control" name="description"
                                                                      id="description" rows="3" required></textarea>
                                                            <div class="invalid-feedback">
                                                                請與教練分享參加目標與期望。
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>
                                                <hr>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <label for="courseStatus" class="form-label">課程狀態</label>
                                                        <select class="form-select" id="courseStatus"
                                                                name="courseStatus" aria-label="Default select example"
                                                                required>
                                                            <option value="1">可參加</option>
                                                            <option value="2">暫停報名</option>
                                                            <option value="3">截止報名</option>
                                                            <option value="4">滿團</option>
                                                            <!-- <option value="5">強制下架</option> -->
                                                        </select>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label for="paidAdvertising"
                                                               class="form-label">要不要買廣告</label>
                                                        <select class="form-select" id="paidAdvertising"
                                                                name="paidAdvertising"
                                                                aria-label="Default select example" required>
                                                            <option value="0">不買</option>
                                                            <option value="1">買</option>
                                                        </select>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label class="form-label">廣告時效</label>
                                                        <input type="date" id="paidAdvertisingTime1"
                                                               name="paidAdvertisingTime1" placeholder="日期..."
                                                               class="form-control" value="2024-05-08" required>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label class="form-label">--</label>
                                                        <input type="time" id="paidAdvertisingTime2"
                                                               name="paidAdvertisingTime2" placeholder="時間..."
                                                               class="form-control" value="11:11" required>
                                                        <div class="invalid-feedback">
                                                            必填!
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>
                                                <!-- row eight -->
                                                <hr>
                                                <br>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div> <!--"modal-body" -->
                        <div class="modal-footer">
                            <button id="modalClose" type="button" class="btn btn-secondary modalClose"
                                    data-bs-dismiss="modal">Close
                            </button>
                            <button id="modalSend" type="button" class="btn btn-primary">Send</button>
                        </div>
                    </div>
                </div>
            </div><!-- Modal -->

            <!-- Modal 已結束課程使用staticBackdropOnlySee-->
            <div class="modal fade" id="staticBackdropOnlySee" data-bs-backdrop="static" data-bs-keyboard="false"
                 tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"> <!-- 效果都在這 -->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="staticBackdropLabel">已結束課程</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body">

                            <div class="container custom-container  px-4 px-lg-5 mt-5">
                                <div class="col-12 row ">
                                    <div class="col-12 formpad "
                                         style="background-color: #E9E9E9; padding-top: 10px;border: solid red;">
                                        <form id="myform1" method="post" enctype="multipart/form-data"
                                              class="row g-3 needs-validation" novalidate>
                                            <br>
                                            <h3>歷史活動表單</h3>
                                            <hr>
                                            <!-- image upload ====ccccc===================  -->
                                            <div class="card mt-5 justify-content-center text-center">
                                                <div class="card-body">
                                                    <!-- <div class="form-group "> -->
                                                    <div id="previewBox1">
                                                        <img id="photo1" class="card-img-top event_pic"
                                                             src="https://media.istockphoto.com/id/1228962068/photo/colorful-autumn-season-and-mountain-fuji-with-morning-fog-and-red-leaves-at-lake-kawaguchiko.jpg?s=612x612&w=0&k=20&c=fsAoWZPMPv0iqwmGLVWginjP_jk3-tVsBCg4ym-e_Js="
                                                             alt="..."/>
                                                    </div>
                                                    <!-- </div> -->
                                                </div>
                                            </div>
                                            <!-- image upload ====ccccc===================  -->
                                            <!-- Zero row 之後抓會員的session-->
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <label for="creator" class="form-label">creator</label>
                                                    <div id="creator1" name="creator"
                                                         style="background-color: whitesmoke;">3
                                                    </div>
                                                </div>
                                                <!-- First row -->
                                                <div class="row">
                                                    <label for="event_name" class="form-label">聚會名稱</label>
                                                    <div id="event_name1" name="event_name"
                                                         style="background-color: whitesmoke;">111
                                                    </div>
                                                </div>
                                                <hr>
                                                <br>
                                                <!-- Second row -->
                                                <!-- <div class="row"> -->
                                                <div class="col-sm-4">
                                                    <label for="categoryId1" class="form-label">聚會類型</label>
                                                    <div id="categoryId1" name="categoryId"
                                                         style="background-color: whitesmoke;">222
                                                    </div>
                                                </div>
                                                <div class="col-sm-4">
                                                    <label for="city1" class="form-label">所在城市</label>
                                                    <div id="city1" name="city"
                                                         style="background-color: whitesmoke;">223
                                                    </div>
                                                </div>
                                                <div class="col-sm-4">
                                                    <label for="district1" class="form-label">所在地區</label>
                                                    <div id="district1" name="district"
                                                         style="background-color: whitesmoke;">224
                                                    </div>
                                                </div>
                                                <!-- </div> -->
                                                <br>
                                                <!-- Third row -->
                                                <div class="col-sm-8">
                                                    <label class="form-label">場地名稱</label>
                                                    <div id="location1" name="location"
                                                         style="background-color: whitesmoke;">331
                                                    </div>
                                                </div>
                                                <div class="col-sm-4">
                                                    <label class="form-label">預計花費</label>
                                                    <div id="price1" name="price"
                                                         style="background-color: whitesmoke;">332
                                                    </div>
                                                </div>
                                                <hr>
                                                <br>
                                                <!-- Forth row -->
                                                <div class="col-sm-12"></div>
                                                <label class="form-label">活動地址</label>
                                                <div name="address" id="address1"
                                                     style="background-color: whitesmoke;">441
                                                </div>
                                                <br>
                                                <!-- Fith row -->
                                                <div class="col-sm-5">
                                                    <label class="form-label">活動日期</label>
                                                    <div type="date" id="eventDate1" name="eventDate"
                                                         style="background-color: whitesmoke;">551
                                                    </div>
                                                </div>
                                                <div class="col-sm-5">
                                                    <label class="form-label">活動開始時間</label>
                                                    <div type="time" id="startTime1" name="startTime"
                                                         style="background-color: whitesmoke;">
                                                        552
                                                    </div>
                                                </div>
                                                <br>
                                                <!--  row Six -->
                                                <div class="col-sm-5">
                                                    <label class="form-label">報名截止日期</label>
                                                    <div id="lastVerifyDate1" name="lastVerifyDate"
                                                         style="background-color: whitesmoke;">661
                                                    </div>
                                                </div>
                                                <div class=" col-sm-5">
                                                    <label class="form-label">報名截止時間</label>
                                                    <div id="lastVerifyTime1" name="lastVerifyTime"
                                                         style="background-color: whitesmoke;">662
                                                    </div>
                                                </div>
                                                <br>
                                                <!-- row  seven -->
                                                <div class="col-sm-4">
                                                    <label class="form-label">人數上限</label>
                                                    <div id="maxAttendees1" name="maxAttendees"
                                                         style="background-color: whitesmoke;">771
                                                    </div>
                                                </div>
                                                <div class="col-sm-4">
                                                    <label class="form-label">課程時長(小時)</label>
                                                    <div id="courseDuration1" name="courseDuration"
                                                         style="background-color: whitesmoke;">772
                                                    </div>
                                                </div>
                                                <div class="col-sm-4">
                                                    <label class="form-label">付費方式</label>
                                                    <div id="paymentMethod1" name="paymentMethod"
                                                         style="background-color: whitesmoke;">773
                                                    </div>
                                                </div>
                                                <br>
                                                <!-- row eight -->
                                                <div class="col-sm-12">
                                                    <label for="description">聚會描述和備註</label>
                                                    <div name="description" id="description1"
                                                         style="background-color: whitesmoke;">881
                                                    </div>
                                                </div>
                                                <br>
                                                <hr>
                                                <div class="col-sm-3">
                                                    <label for="courseStatus1" class="form-label">課程狀態</label>
                                                    <div id="courseStatus1" name="courseStatus"
                                                         style="background-color: whitesmoke;">991
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label for="paidAdvertising1"
                                                           class="form-label">要不要買廣告</label>
                                                    <div id="paidAdvertising1" name="paidAdvertising"
                                                         style="background-color: whitesmoke;">992
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="form-label">廣告時效</label>
                                                    <div id="paidAdvertisingTime11" name="paidAdvertisingTime1"
                                                         style="background-color: whitesmoke;">993
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="form-label">--</label>
                                                    <div id="paidAdvertisingTime21" name="paidAdvertisingTime2"
                                                         style="background-color: whitesmoke;">994
                                                    </div>
                                                </div>
                                                <hr>
                                                <br>
                                                <br>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div> <!--"modal-body" -->
                        <div class="modal-footer">
                            <button id="modalClose1" type="button" class="btn btn-secondary modalClose"
                                    data-bs-dismiss="modal">Close
                            </button>
                        </div>
                    </div>
                </div>
            </div><!-- Modal -->

            <!-- Modal 審核區使用staticBackdropPass-->
            <div class="modal fade" id="staticBackdropPass" data-bs-backdrop="static" data-bs-keyboard="false"
                 tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"> <!-- 效果都在這 -->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="staticBackdropLabel21">審核參加者&nbsp;&nbsp;</h5>
                            <div id="staticBackdropattendId" style="display: none;"></div>
                            &nbsp;課程名稱:
                            <div id="staticBackdropPassEventName"></div>
                            &nbsp;報名時間:
                            <div id="staticBackdropPassTime"></div>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        參加原因:
                        <div class="modal-body">
                            <div class="form-control event_participate" id="staticBackdropPassText"
                                 name="description"></div>
                        </div> <!--"modal-body" -->
                        <div class="modal-footer">
                            <button id="modalClose2" type="button" class="btn btn-secondary modalClose"
                                    data-bs-dismiss="modal">Close
                            </button>
                            <button id="modalPass" type="button" class="btn btn-primary">接受報名</button>
                            <button id="modalUnPass" type="button" class="btn btn-primary">拒絕報名</button>
                        </div>
                    </div>
                </div>
            </div><!-- Modal -->

            <!-- Modal 審核區使用(已經審核完成)staticPassCheck-->
            <div class="modal fade" id="staticBackdropPass1" data-bs-backdrop="static" data-bs-keyboard="false"
                 tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"> <!-- 效果都在這 -->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="staticBackdropLabel22">審核參加者(已審核)&nbsp;</h5>
                            &nbsp;課程名稱:
                            <div id="staticBackdropPassEventName1"></div>
                            &nbsp;報名時間:
                            <div id="staticBackdropPassTime1"></div>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        參加原因
                        <div class="modal-body">
                            <div class="form-control event_participate" id="staticBackdropPassText1"
                                 name="description"></div>
                        </div> <!--"modal-body" -->
                        <div class="modal-footer">
                            <button id="modalClose3" type="button" class="btn btn-secondary modalClose"
                                    data-bs-dismiss="modal">Close
                            </button>
                        </div>
                    </div>
                </div>
            </div><!-- Modal -->


        </div> <!-- row結束 -->
    </div> <!-- container結束 -->
</main>


<!-- 以下footer================================================================================= -->
<!-- <footer class="footer py-5 footer-color">
    <div class="container">
        <div class="row">
            <div class="col-3">
                <p class="m-0 text-white h3">客服中心</p>
                <p class="m-0 text-white">Email: Ixercise@gmail.com</p>
                <p class="m-0 text-white">Tel: 02-2712-0589</p>
            </div>
            <div class="col-3">
                <p class="m-0 text-white h3">快速使用</p>
                <a class="d-block" href="">註冊會員</a>
                <a class="d-block" href="">舉辦活動</a>
                <a class="d-block" href="">常見問題</a>
            </div>
            <div class="col-3">
                <p class="m-0 text-white h3">主要頁面</p>
                <a class="d-block" href="">首頁</a>
                <a class="d-block" href="">活動</a>
                <a class="d-block" href="">論壇</a>
                <a class="d-block" href="">商城</a>
            </div>
            <div class="col-3"></div>
        </div>
    </div>
</footer> -->
<!-- footer結束================================================================================= -->

<!-- 引入所需函式庫 -->
<script src="../lib/js/bootstrap.bundle.min.js"></script>
<script src="../lib/js/popper.min.js"></script>
<script src="../lib/vendors/jquery/jquery-3.6.4.min.js"></script>
<script src="../lib/js/nav.js"></script>
<!-- 漂亮alert! -->
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<!-- 載入 Font Awesome -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"></script>
<!-- ================================================================= -->


<script>
    document.getElementById("sidebarCollapse").addEventListener("click", function () {
        document.getElementById("sidebar").classList.toggle("active");
    });
    const sportTypeMap = {
        1: '足球',
        2: '籃球',
        3: '網球',
        4: '排球',
        5: '橄欖球',
        6: '棒球',
        7: '曲棍球',
        8: '高爾夫球',
        9: '羽毛球',
        10: '乒乓球',
        11: '壁球',
        12: '手球',
        13: '保齡球',
        14: '有氧操課',
        15: '重訓課',
        16: '瑜伽課',
        17: '舞蹈課',
        18: '腹肌課',
        19: '動感單車課',
        20: '跳繩課',
        21: '拳擊課',
        22: '跳舞操課',
        23: '瑜伽拉伸課',
        24: '其他'
    };

    const courseTypeMap = {
        1: '可參加',
        2: '暫停報名',
        3: '截止報名',
        4: '滿團',
        5: '強制下架'
    };

    // 1.參加待審核2.通過3.未通過4:退出待審核5:退出成功
    const auditTypeMap = {
        1: '待審核',
        2: '通過',
        3: '未通過',
        4: '退出申請中',
        5: '退出成功'
    };

</script>

<script>
    $(document).ready(function () {
        let LSaccountId = localStorage.getItem('accountId');
        console.log("LSaccountId=" + LSaccountId);

        $.ajax({
            url: "/ixercise/courseAttendee/status/" + 1, //1:參加待審核
            type: "GET",
            dataType: "json",
            success: async function (resp) {
                // console.log("參加活動申請未審核resp>>" + resp);
                let appendaudit2 = '';
                let creatorList = [];
                // console.log("退出活動申請未審核length: " + resp.length);

                $.ajax({
                    url: "/ixercise/course/creator/" + LSaccountId, //會員accountId=3
                    type: "GET",
                    dataType: "json",
                    async: false,
                    success: function (resp1) {
                        // console.log("kkkkkkkkkkkkkresp>>" + resp);
                        // 將每個元素添加到列表中
                        for (var i = 0; i < resp1.length; i++) {
                            creatorList.push(resp1[i].courseId);
                        }
                        console.log("creatorList:", creatorList);
                    }, error: function (xhr, status, error) {
                        alert("Error: " + xhr.responseText);
                    }
                });
                // 篩選該教練的課
                var filter2 = resp.filter(function (item) {
                    return creatorList.includes(item.courseId);
                });
                console.log("參加待審核filter2:", filter2);
                $('#audit2bgsecondary').empty().append(filter2.length);

            }, errorfunction(xhr, status, error) {
                alert("Error: " + xhr.responseText);
            }
        });

        $.ajax({
            url: "/ixercise/courseAttendee/status/" + 4, //4:退出待審核
            type: "GET",
            dataType: "json",
            success: async function (resp) {
                // console.log("退出活動申請未審核resp>>" + resp);
                let creatorList = [];
                let appendaudit2 = '';
                // console.log("退出活動申請未審核length: " + resp.length);
                $.ajax({
                    url: "/ixercise/course/creator/" + LSaccountId, //會員accountId=3
                    type: "GET",
                    dataType: "json",
                    async: false,
                    success: function (resp1) {
                        // console.log("kkkkkkkkkkkkkresp>>" + resp);
                        // 將每個元素添加到列表中
                        for (var i = 0; i < resp1.length; i++) {
                            creatorList.push(resp1[i].courseId);
                        }
                        console.log("creatorList:", creatorList);
                    }, error: function (xhr, status, error) {
                        alert("Error: " + xhr.responseText);
                    }
                });
                // 篩選該教練的課
                var filter2 = resp.filter(function (item) {
                    return creatorList.includes(item.courseId);
                });
                console.log("退出待審核filter2:", filter2);
                $('#leave2bgsecondary').empty().append(filter2.length);


            }, errorfunction(xhr, status, error) {
                alert("Error: " + xhr.responseText);
            }
        });

        // <<課程管理>> 1.可參加 2. 暫停報名 3. 截止報名 4:滿團 5:強制下架  >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

        // 一、已開設課程
        $('#c1').on('click', function (e) {
            e.preventDefault();
            // console.log(this);
            // 表頭
            $('#th1').text("courseId");
            $('#th2').text("課程名稱");
            $('#th3').text("課程時間");
            $('#th4').text("城市");
            $('#th5').text("課程分類");
            $('#th6').text("courseStatus");
            $('#th7').text("付費廣告");

            getAllYourCourse();
        });

        //    撈出已開設課程
        function getAllYourCourse() {
            $.ajax({
                url: "/ixercise/course/creator/" + LSaccountId, //會員accountId=3
                type: "GET",
                dataType: "json",
                success: function (resp) {
                    // console.log("已開設課程resp>>" + resp);
                    // filter篩選:日期
                    let currentDate = new Date();
                    var filteredData0 = [];
                    filteredData0 = resp.filter(function (item) {
                        var StartTime = new Date(item.courseStartTime);
                        // console.log("StartTime>>" + StartTime);
                        if (StartTime > currentDate) {
                            return true;
                        }
                    });
                    let appendFrom1 = '';
                    if (resp[0].successful) {
                        for (let i in filteredData0) {
                            console.log("filteredData0-creator>>" + filteredData0[i].creator);
                            appendFrom1 += `
                                            <tr>
                                                <td style="background-color:rgba(66, 184, 131, 0.5)">${Number(i) + 1}</td>
                                                <td>${filteredData0[i].courseId}</td>
                                                <td>${filteredData0[i].eventName}</td>
                                                <td>${filteredData0[i].courseStartTime}</td>
                                                <td>${filteredData0[i].city}</td>
                                                <td>${filteredData0[i].categoryId}</td>
                                                <td>${courseTypeMap[filteredData0[i].courseStatus]}</td>
                                                <td>${filteredData0[i].paidAdvertising}</td>
                                                <td><button type="button" class="btn btn-primary alterbtn" data-bs-toggle="modal" data-bs-target="#staticBackdrop">修改</button></td>
                                                <td><button class="btn btn-danger deletebtn">刪除</button></td>
                                            </tr>
                                            `;
                        }
                    } else {
                        swal("Warning!", "沒有資料", "warning");
                    }
                    $('#aaa').empty().append(appendFrom1);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        }


        // alterbtn
        $('#aaa').on('click', '.alterbtn', function (e) {
            // e.preventDefault;
            console.log("alterbtn");
            var courseId = $(this).closest('tr').find('td:eq(1)').text();
            console.log("alterbtn clicked. Course ID: " + courseId);
            var creator = 3; //會員session id

            $.ajax({
                url: "/ixercise/course/courseId/" + courseId,
                type: "GET",
                dataType: "json",
                data: {courseId: courseId},
                success: function (resp) {
                    // console.log("resp>>" + resp);

                    $("#courseId").text(resp.courseId);
                    $("#photo").attr("src", "/ixercise/lib/img/course/" + resp.photo);
                    $("#photoname").text(resp.photo);
                    $("#creator").text(resp.creator);
                    $("#event_name").val(resp.eventName);
                    $("#price").val(resp.expectedPrice);
                    $("#eventDate").val(resp.courseStartDate);
                    $("#courseDuration").val(resp.courseDuration);

                    var timePart = resp.courseStartTime.split(' ')[1];
                    // console.log("courseStartTime:", courseStartTime);
                    // console.log("timePart:", timePart);
                    $("#startTime").val(timePart);

                    var lastVerifyDate = resp.registrationDeadline.split(' ')[0];
                    var lastVerifyTime = resp.registrationDeadline.split(' ')[1];
                    $("#lastVerifyDate").val(lastVerifyDate);
                    $("#lastVerifyTime").val(lastVerifyTime);

                    $("#maxAttendees").val(resp.maximumCapacity);
                    $("#description").val(resp.description);
                    $("#location").val(resp.location);

                    $("#city option").filter(function () {
                        return $(this).text() == resp.city;
                    }).prop("selected", true);

                    $("#district").empty().append('<option selected disabled value="">加载中...</option>');
                    //撈該縣市的區
                    $.ajax({
                        url: "/ixercise/course/districts/" + resp.city,
                        type: "GET",
                        contentType: 'application/json',
                        success: function (resp0) {
                            let tableData = '';
                            for (let i = 0; i < resp0.length; i++) {
                                tableData += `<option value="${Number(i).name}">${resp0[i].name}</option>`;
                            }
                            $("#district").empty().append(tableData);

                            $("#district option").filter(function () {
                                return $(this).text() == resp.district;
                            }).prop("selected", true);
                        },
                        error: function (xhr, status, error) {
                            alert("Error: " + xhr.responseText);
                        }
                    });

                    $("#categoryId option").filter(function () {
                        return $(this).text() == resp.categoryId;
                    }).prop("selected", true);

                    $("#address").val(resp.detailedAddress);
                    $("#courseStatus").val(resp.courseStatus);
                    if (resp.paidAdvertisingTime) {
                        var paidAdvertisingTime1 = resp.paidAdvertisingTime.split(' ')[0];
                        var paidAdvertisingTime2 = resp.paidAdvertisingTime.split(' ')[1];
                        $("#paidAdvertisingTime1").val(paidAdvertisingTime1);
                        $("#paidAdvertisingTime2").val(paidAdvertisingTime2);
                    } else {
                        $("#paidAdvertisingTime1").val("");
                        $("#paidAdvertisingTime2").val("");
                    }


                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        // Delete selected image
        $("#delete-btn").click(function () {
            $("#photo-dropzone").val("");
        });

        // 修改時可預覽上傳照片
        $("#photo-dropzone").change(function () {
            readURL(this);
        });

        // Preview image function =================zzzz=================
        function readURL(input) {
            $("#previewBox").attr("restrictChange", true);
            if (input.files && input.files[0]) {
                if (input.files[0].type.match('image.*')) {
                    var reader = new FileReader();
                    reader.onload = function () {
                        $("#previewBox").html('<img src="' + reader.result + '" class="preview_img">');
                    };
                    reader.readAsDataURL(input.files[0]);
                }
            }
        }

        // modalSend 送出修改按鈕
        $('#modalSend').on('click', function (e) {
            // e.preventDefault;
            // console.log("modalSend");
            let courseId = $("#courseId").text();
            let photodropzone = $("#photo-dropzone");

            let creator = $("#creator").text();
            let eventName = $("#event_name").val();
            let expectedPrice = $("#price").val();

            let courseStartDate = $("#eventDate").val();
            let courseStartTime = courseStartDate + " " + $("#startTime").val() + ":00";
            let courseDuration = $("#courseDuration").val();

            let lastVerifyDate = $("#lastVerifyDate").val();
            let lastVerifyTime = $("#lastVerifyTime").val();
            let registrationDeadline = lastVerifyDate + " " + lastVerifyTime + ":00";
            // console.log("registrationDeadline>>" + registrationDeadline);
            let maximumCapacity = $("#maxAttendees").val();
            let description = $("#description").val();
            let location = $("#location").val();
            // let city = $("#city").val();
            let city = $("#city option:selected").text();

            let district = $("#district option:selected").text();
            let detailedAddress = $("#address").val();
            let categoryId = $("#categoryId option:selected").text();

            let courseStatus = $("#courseStatus").val();
            let paidAdvertising = $("#paidAdvertising").val();
            console.log("paidAdvertising代碼>>" + paidAdvertising);
            let paidAdvertisingTime;
            if (paidAdvertising == "") {
                paidAdvertisingTime = "2040-01-01 00:00:00";
            } else {
                let paidAdvertisingTime1 = $("#paidAdvertisingTime1").val();
                let paidAdvertisingTime2 = $("#paidAdvertisingTime2").val();
                paidAdvertisingTime = paidAdvertisingTime1 + " " + paidAdvertisingTime2 + ":00";
            }
            console.log("paidAdvertisingTime>>" + paidAdvertisingTime);
            // let paymentMethod = $("#paymentMethod").val();

            // 检查是否有有填欄位
            let photo;
            let file = photodropzone[0].files[0];
            if (!file) {
                // 舊照片圖片讀取
                photo = $("#photoname").text();
            } else {
                let formData = new FormData();
                formData.append('file', file);
                photo = file.name;

                $.ajax({
                    url: "/ixercise/course/upload-photo",
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        // console.log(response);
                        console.log("照片存成功");
                    },
                    error: function (xhr, status, error) {
                        alert("Error: " + xhr.responseText);
                    }
                });
            }
            console.log("看photo是否更新>>" + photo);

            if (!eventName) {
                $('#eventName').siblings('.invalid-feedback').show();
                return;
            }
            if (!expectedPrice) {
                $('#expectedPrice').siblings('.invalid-feedback').show();
                return;
            }
            if (!courseStartDate) {
                $('#courseStartDate').siblings('.invalid-feedback').show();
                return;
            }
            if (!$("#startTime").val()) {
                $("#startTime").siblings('.invalid-feedback').show();
                return;
            }
            if (!courseDuration) {
                $('#courseDuration').siblings('.invalid-feedback').show();
                return;
            }
            if (!$("#lastVerifyTime").val()) {
                $("#lastVerifyTime").siblings('.invalid-feedback').show();
                return;
            }
            if (!maximumCapacity) {
                $('#maximumCapacity').siblings('.invalid-feedback').show();
                return;
            }
            if (!location || location == "請選擇..") {
                $('#location').siblings('.invalid-feedback').show();
                return;
            }
            if (!city || city == "請選擇..") {
                $('#city').siblings('.invalid-feedback').show();
                return;
            }
            if (!district) {
                $('#district').siblings('.invalid-feedback').show();
                return;
            }
            if (!detailedAddress) {
                $('#detailedAddress').siblings('.invalid-feedback').show();
                return;
            }
            if (!categoryId) {
                $('#categoryId').siblings('.invalid-feedback').show();
                return;
            }
            if (!description) {
                $('#description').siblings('.invalid-feedback').show();
                return;
            }
            console.log("沒錯!都有填");
            // 检查是否有有填欄位--結束

            // 步驟二、存入資料庫
            console.log("courseId:", courseId);
            console.log("eventName:", eventName);
            console.log("expectedPrice:", expectedPrice);
            $.ajax({
                url: "/ixercise/course",
                type: "PUT",
                contentType: 'application/json',
                data: JSON.stringify({
                    courseId: courseId,
                    photo: photo,
                    eventName: eventName,
                    expectedPrice: expectedPrice,
                    courseStartDate: courseStartDate,
                    courseStartTime: courseStartTime,
                    courseDuration: courseDuration,
                    registrationDeadline: registrationDeadline,
                    maximumCapacity: maximumCapacity,
                    description: description,
                    location: location,
                    city: city,
                    district: district,
                    detailedAddress: detailedAddress,
                    categoryId: categoryId,
                    courseStatus: courseStatus,
                    paidAdvertising: paidAdvertising,
                    paidAdvertisingTime: paidAdvertisingTime
                }),
                success: function (resp) {
                    console.log("resp>>" + resp);
                    // $('#myform').reset(); //清空表單
                    swal("Warning!", resp.message, "warning");
                    $('#staticBackdrop').modal('hide');
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        // deletebtn
        $('#aaa').on('click', '.deletebtn', function (e) {
            // e.preventDefault;
            console.log("deletebtn");
            var isconfirm = confirm('你確定嗎？');
            if (isconfirm) {
                var courseId = $(this).closest('tr').find('td:eq(1)').text();
                console.log("deletebtn clicked. Course ID: " + courseId);

                $.ajax({
                    url: "/ixercise/course/courseId/" + courseId,
                    type: "DELETE",
                    dataType: "json",
                    data: {
                        courseId: courseId
                    },
                    success: function (resp) {
                        console.log("resp>>" + resp);
                        alert("刪除成功請刷新頁面")
                    },
                    error: function (xhr, status, error) {
                        alert("Error: " + xhr.responseText);
                    }
                });
            } else {
                alert('你已取消刪除');
            }

        });


        // 二、已結束課程
        $('#c2').on('click', function (e) {
            $.ajax({
                url: "/ixercise/course/creator/" + LSaccountId,//會員accountId
                type: "GET",
                dataType: "json",
                success: function (resp) {
                    console.log("resp>>" + resp);
                    // 表頭
                    $('#th1').text("courseId");
                    $('#th2').text("課程名稱");
                    $('#th3').text("課程時間");
                    $('#th4').text("城市");
                    $('#th5').text("課程分類");
                    $('#th6').text("courseStatus");
                    $('#th7').text("付費廣告");
                    // filter篩選:日期
                    let currentDate = new Date();
                    var filteredData0 = [];
                    filteredData0 = resp.filter(function (item) {
                        var StartTime = new Date(item.courseStartTime);
                        console.log("StartTime>>" + StartTime);
                        if (StartTime < currentDate) {
                            return true;
                        }
                    });
                    let appendFrom2 = '';
                    for (let i in filteredData0) {
                        console.log("filteredData0-creator>>" + filteredData0[i].creator);
                        appendFrom2 += `
                                            <tr>
                                                <td style="background-color:rgba(66, 184, 131, 0.5)">${Number(i) + 1}</td>
                                                <td>${filteredData0[i].courseId}</td>
                                                <td>${filteredData0[i].eventName}</td>
                                                <td>${filteredData0[i].courseStartTime}</td>
                                                <td>${filteredData0[i].city}</td>
                                                <td>${filteredData0[i].categoryId}</td>
                                                <td>${filteredData0[i].courseStatus}</td>
                                                <td>${filteredData0[i].paidAdvertising}</td>
                                                <td><button class="btn btn-primary checkbtn" data-bs-toggle="modal" data-bs-target="#staticBackdropOnlySee">查看</button></td>
                                            </tr>
                                            `;
                    }
                    $('#aaa').empty().append(appendFrom2);

                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        // checkbtn  配合modal已結束課程
        $('#aaa').on('click', '.checkbtn', function (e) {
            // e.preventDefault;
            console.log("checkbtn");
            swal("Check!", "僅供觀看，無法修改", "success");
            var courseId = $(this).closest('tr').find('td:eq(1)').text();
            console.log("deletebtn clicked. Course ID: " + courseId);
            var creator = LSaccountId; //會員accountId

            $.ajax({
                url: "/ixercise/course/courseId/" + courseId,
                type: "GET",
                dataType: "json",
                data: {courseId: courseId},
                success: function (resp) {
                    $("#photo1").attr("src", "/ixercise/lib/img/course/" + resp.photo);
                    $("#creator1").text(resp.creator);
                    $("#event_name1").val(resp.eventName);
                    $("#price1").val(resp.expectedPrice);
                    $("#eventDate1").val(resp.courseStartDate);
                    $("#courseDuration1").val(resp.courseDuration);

                    var timePart = resp.courseStartTime.split(' ')[1];
                    // console.log("courseStartTime:", courseStartTime);
                    // console.log("timePart:", timePart);
                    $("#startTime1").val(timePart);

                    var lastVerifyDate = resp.registrationDeadline.split(' ')[0];
                    var lastVerifyTime = resp.registrationDeadline.split(' ')[1];
                    $("#lastVerifyDate1").val(lastVerifyDate);
                    $("#lastVerifyTime1").val(lastVerifyTime);
                    $("#maxAttendees1").val(resp.maximumCapacity);
                    $("#description1").val(resp.description);
                    $("#location1").val(resp.location);
                    $("#cit1").val(resp.city);
                    $("#district1").val(resp.district);
                    $("#categoryId1").val(resp.categoryId);

                    $("#address1").val(resp.detailedAddress);
                    $("#courseStatus1").val(resp.courseStatus);
                    var paidAdvertisingTime1 = resp.paidAdvertisingTime.split(' ')[0];
                    var paidAdvertisingTime2 = resp.paidAdvertisingTime.split(' ')[1];
                    $("#paidAdvertisingTime1").val(paidAdvertisingTime1);
                    $("#paidAdvertisingTime2").val(paidAdvertisingTime2);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        // 三、、暫存課程   1.可參加 2. 暫停報名 3. 截止報名 4:滿團 5:強制下架
        $('#c3').on('click', function (e) {
            // console.log(this);
            $.ajax({
                url: "/ixercise/course/creator/" + LSaccountId,//會員accountId
                type: "GET",
                dataType: "json",
                success: function (resp) {
                    console.log("暫存課程resp>>" + resp);
                    // 表頭
                    $('#th1').text("courseId");
                    $('#th2').text("課程名稱");
                    $('#th3').text("課程時間");
                    $('#th4').text("城市");
                    $('#th5').text("課程分類");
                    $('#th6').text("courseStatus");
                    $('#th7').text("付費廣告");
                    // filter篩選:日期
                    let currentDate = new Date();
                    var filteredData0 = [];
                    filteredData0 = resp.filter(function (item) {
                        var StartTime = new Date(item.courseStartTime);
                        console.log("StartTime>>" + StartTime);
                        if ((StartTime > currentDate) && (item.courseStatus == 2)) {
                            return true;
                        }
                    });
                    if (filteredData0.length === 0) {
                        swal("Warning!", "沒有暫存課程", "warning");
                    }
                    let appendFrom3 = '';
                    for (let i in filteredData0) {
                        console.log("filteredData0-creator>>" + filteredData0[i].creator);
                        appendFrom3 += `
                                            <tr>
                                                <td style="background-color:rgba(66, 184, 131, 0.5)">${Number(i) + 1}</td>
                                                <td>${filteredData0[i].courseId}</td>
                                                <td>${filteredData0[i].eventName}</td>
                                                <td>${filteredData0[i].courseStartTime}</td>
                                                <td>${filteredData0[i].city}</td>
                                                <td>${filteredData0[i].categoryId}</td>
                                                <td>${filteredData0[i].courseStatus}</td>
                                                <td>${filteredData0[i].paidAdvertising}</td>
                                                <td><button class="btn btn-primary alterbtn" data-bs-toggle="modal" data-bs-target="#staticBackdrop">修改</button></td>
                                                <td><button class="btn btn-danger deletebtn">刪除</button></td>
                                            </tr>
                                            `;
                    }
                    $('#aaa').empty().append(appendFrom3);

                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        // 四、被檢舉課程
        $('#c4').on('click', function (e) {
            console.log(this);
            // swal("Warning!", "還沒寫!", "warning");
        });


        // <<學員參加審核>>  1.待審核2.通過3.未通過4:退出 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
        //一、已審核
        $('#audit1').on('click', function (e) {
            console.log("audit1>>" + this);
            // 表頭
            $('#th1').text("會員名稱");
            $('#th2').text("課程名稱");
            $('#th3').text("報名時間");
            $('#th4').text("參加原因");
            $('#th5').text("status");
            $('#th6').text("付款狀態");
            $('#th7').text("attendId");
            let appendaudit1head1 = '';
            let appendaudit1head2 = '';
            appendaudit1head1 += `<label for="" class="form-label">審核狀態:</label>`;
            appendaudit1head2 += `<select class="form-select" aria-label="Default select example">
                                        <option selected value="2">已通過</option>
                                        <option value="3">未通過</option>
                                        <option value="5">已退出</option>
                                    </select>`;
            $('#selecthead1').empty().append(appendaudit1head1);
            $('#selecthead2').empty().append(appendaudit1head2);
            $.ajax({
                url: "/ixercise/courseAttendee",  //先拿全部
                type: "GET",
                dataType: "json",
                success: async function (resp) {
                    console.log("已審核resp>>" + resp);
                    let appendaudit1 = '';

                    var filteredDataAudit1 = [];
                    filteredDataAudit1 = resp.filter(function (item) {
                        console.log("item.status>>" + item.status);
                        if (item.status == 2) {  //2.通過3.未通過 5:退出成功
                            return true;
                        }
                    });
                    console.log("filteredDataAudit1>>" + filteredDataAudit1);
                    for (let i in filteredDataAudit1) {
                        let reason = filteredDataAudit1[i].reason;
                        let truncatedReason = reason.length > 10 ? reason.substring(0, 10) + "..." : reason;
                        appendaudit1 += `<tr>
                                <td style="background-color:rgba(66, 184, 131, 0.5)">${Number(i) + 1}</td>
                                `;
                        //分段接會員accountId
                        // appendaudit1 += `<td>${filteredDataAudit1[i].accountId}</td>`;
                        try {
                            let accountName = await GETaccountNameById(filteredDataAudit1[i].accountId);
                            appendaudit1 += `<td>${accountName}</td>`;
                        } catch (error) {
                            console.error(error);
                            appendaudit1 += `<td>Error retrieving</td>`;
                        }
                        //分段接課程courseId
                        // appendaudit1 += `<td>${filteredDataAudit1[i].courseId}</td>
                        try {
                            let eventName = await GETcourseNameById(filteredDataAudit1[i].courseId);
                            appendaudit1 += `<td>${eventName}</td>`;
                        } catch (error) {
                            console.error(error);
                            appendaudit1 += `<td>Error retrieving</td>`;
                        }
                        appendaudit1 += `   <td>${filteredDataAudit1[i].attendTime}</td>
                                                <td>${truncatedReason}</td>
                                                <td>${auditTypeMap[filteredDataAudit1[i].status]}</td>
                                                <td>${filteredDataAudit1[i].paymentStatus}</td>
                                                <td>${filteredDataAudit1[i].attendId}</td>
                                                <td><button class="btn btn-primary Passcheckbtn" data-bs-toggle="modal"
                                                        data-bs-target="#staticBackdropPass1">查看</button></td>
                                            </tr>`;
                    }
                    $('#aaa').empty().append(appendaudit1);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        function GETaccountNameById(input) {
            return new Promise(function (resolve, reject) {
                $.ajax({
                    url: "/ixercise/Account/Manage/" + input,  //會員accountId
                    type: "GET",
                    dataType: "json",
                    success: function (resp) {
                        resolve(resp.accountName);
                    },
                    error: function (xhr, status, error) {
                        reject(error);
                    }
                });
            });
        }

        function GETcourseNameById(input) {
            return new Promise(function (resolve, reject) {
                $.ajax({
                    url: "/ixercise/course/courseId/" + input,  //課程courseId
                    type: "GET",
                    dataType: "json",
                    success: function (resp) {
                        resolve(resp.eventName);
                    },
                    error: function (xhr, status, error) {
                        reject(error);
                    }
                });
            });
        }


        // 選擇審核狀態: 1.參加待審核2.通過3.未通過4:退出待審核5:退出成功
        $(document).on('change', '#selecthead2 select', function () {
            let selectedValue = $(this).val();
            console.log("selectedValue= " + selectedValue);

            $.ajax({
                url: "/ixercise/courseAttendee/status/" + selectedValue,
                type: "GET",
                dataType: "json",
                success: async function (filteredDataAudit1) {
                    console.log("未審核resp>>" + filteredDataAudit1);
                    let appendaudit1 = '';
                    if (filteredDataAudit1[0].successful) {
                        for (let i in filteredDataAudit1) {
                            let reason = filteredDataAudit1[i].reason;
                            let truncatedReason = reason.length > 10 ? reason.substring(0, 10) + "..." : reason;
                            appendaudit1 += `<tr>
                                <td style="background-color:rgba(66, 184, 131, 0.5)">${Number(i) + 1}</td>
                                `;
                            //分段接會員accountId
                            // appendaudit1 += `<td>${filteredDataAudit1[i].accountId}</td>`;
                            try {
                                let accountName = await GETaccountNameById(filteredDataAudit1[i].accountId);
                                appendaudit1 += `<td>${accountName}</td>`;
                            } catch (error) {
                                console.error(error);
                                appendaudit1 += `<td>Error retrieving</td>`;
                            }

                            //分段接課程courseId
                            // appendaudit1 += `<td>${filteredDataAudit1[i].courseId}</td>
                            try {
                                let eventName = await GETcourseNameById(filteredDataAudit1[i].courseId);
                                appendaudit1 += `<td>${eventName}</td>`;
                            } catch (error) {
                                console.error(error);
                                appendaudit1 += `<td>Error retrieving</td>`;
                            }
                            appendaudit1 += `   <td>${filteredDataAudit1[i].attendTime}</td>
                                                <td>${truncatedReason}</td>
                                                <td>${auditTypeMap[filteredDataAudit1[i].status]}</td>
                                                <td>${filteredDataAudit1[i].paymentStatus}</td>
                                                <td>${filteredDataAudit1[i].attendId}</td>
                                                <td><button class="btn btn-primary Passcheckbtn" data-bs-toggle="modal"
                                                        data-bs-target="#staticBackdropPass1">查看</button></td>
                                            </tr>`;
                        }
                    } else {
                        swal("Warning!", "沒有資料", "warning");
                    }
                    $('#aaa').empty().append(appendaudit1);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        // Passcheckbtn，配合modal已審核區
        $('#aaa').on('click', '.Passcheckbtn', function (e) {
            // e.preventDefault;
            console.log("配合modal已審核區");
            // swal("Check!", "還沒寫", "success");
            var attendId = $(this).closest('tr').find('td:eq(7)').text();
            $.ajax({
                url: "/ixercise/courseAttendee/attendId/" + attendId,
                type: "GET",
                dataType: "json",
                success: function (data) {
                    console.log("resp>>" + data);
                    $('#staticBackdropPassEventName1').text(data.courseId);
                    $('#staticBackdropPassTime1').text(data.attendTime);
                    $('#staticBackdropPassText1').text(data.reason);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });


        //二、未審核
        $('#audit2').on('click', function () {
            // console.log("audit2>>" + this);
            // 表頭
            $('#th1').text("會員名稱");
            $('#th2').text("課程名稱");
            $('#th3').text("報名時間");
            $('#th4').text("參加原因");
            $('#th5').text("status");
            $('#th6').text("付款狀態");
            $('#th7').text("attendId");
            let appendaudit1head1 = '';
            let appendaudit1head2 = '';
            appendaudit1head1 += `<label for="" class="form-label">審核狀態:</label>`;
            appendaudit1head2 += `<select class="form-select" aria-label="Default select example">
                                        <option selected value="1">未審核</option>
                                    </select>`;
            $('#selecthead1').empty().append(appendaudit1head1);
            $('#selecthead2').empty().append(appendaudit1head2);

            joinApplyUnchecked();
        });

        // <<學員參加活動申請>>>>---撈出未審核
        function joinApplyUnchecked() {
            $.ajax({
                url: "/ixercise/courseAttendee/status/" + 1, //1:參加活動未審核
                type: "GET",
                dataType: "json",
                // async: false,
                success: function (resp1) {
                    // console.log("kkkresp1>>" + resp1);
                    var creatorList = []; // 創建空的列表

                    $.ajax({
                        url: "/ixercise/course/creator/" + LSaccountId, //會員accountId=3
                        type: "GET",
                        dataType: "json",
                        async: false,
                        success: function (resp) {
                            // console.log("kkkkkkkkkkkkkresp>>" + resp);
                            // 將每個元素添加到列表中
                            for (var i = 0; i < resp.length; i++) {
                                creatorList.push(resp[i].courseId);
                            }
                            console.log("creatorList:", creatorList);
                        }, error: function (xhr, status, error) {
                            alert("Error: " + xhr.responseText);
                        }
                    });

                    // 篩選該教練的課
                    var filteredDataAudit2 = resp1.filter(function (item) {
                        return creatorList.includes(item.courseId);
                    });

                    let appendaudit2 = '';
                    if (filteredDataAudit2.length > 0 && filteredDataAudit2[0].successful) {
                        for (let i in filteredDataAudit2) {
                            let reason = filteredDataAudit2[i].reason;
                            // console.log("reason:" + reason);
                            let truncatedReason = reason.length > 10 ? reason.substring(0, 10) + "..." : reason;
                            //要分段接會員了accountId
                            appendaudit2 += `
                                            <tr>
                                                <td style="background-color:rgba(66, 184, 131, 0.5)">${Number(i) + 1}</td>
                                                <td>${filteredDataAudit2[i].accountId}</td>
                                                <td>${filteredDataAudit2[i].courseId}</td>
                                                <td>${filteredDataAudit2[i].attendTime}</td>
                                                <td>${truncatedReason}</td>
                                                <td>${auditTypeMap[filteredDataAudit2[i].status]}</td>
                                                <td>${filteredDataAudit2[i].paymentStatus}</td>
                                                <td>${filteredDataAudit2[i].attendId}</td>
                                                <td><button class="btn btn-primary checkpassbtn" data-bs-toggle="modal"
                                                        data-bs-target="#staticBackdropPass">查看</button></td>
                                            </tr>
                                            `;
                        }
                    } else {
                        swal("Warning!", "沒有資料", "warning");
                    }
                    $('#aaa').empty().append(appendaudit2);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        }


        // checkpassbtn，配合modal未審核區
        $('#aaa').on('click', '.checkpassbtn', function (e) {
            // e.preventDefault;
            console.log("checkpassbtn");
            var attendId = $(this).closest('tr').find('td:eq(7)').text();
            $.ajax({
                url: "/ixercise/courseAttendee/attendId/" + attendId,
                type: "GET",
                dataType: "json",
                success: function (data) {
                    console.log("resp>>" + data);
                    $('#staticBackdropPassEventName').text(data.courseId);
                    $('#staticBackdropPassTime').text(data.attendTime);
                    $('#staticBackdropattendId').text(data.attendId);
                    $('#staticBackdropPassText').text(data.reason);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        // modalSend-同意按鈕
        $('#modalPass').on('click', function (e) {
            // e.preventDefault;
            console.log("modalPass");
            var attendId = $('#staticBackdropattendId').text();
            console.log("attendId: " + attendId);
            $.ajax({
                url: "/ixercise/courseAttendee/updateStatusById/" + attendId + "/" + 2,
                type: "PUT",
                // contentType:"application/json",
                // data: JSON.stringify({status:2}),
                dataType: "json",
                success: function (data) {
                    // console.log("resp>>" + data);
                    swal("Success!", data.message, "warning");
                    $('#staticBackdropPass').modal('hide');
                    joinApplyUnchecked();
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        $('#modalUnPass').on('click', function (e) {
            // e.preventDefault();
            console.log("modalUnPass");
            // swal("Warning!", "還沒寫!", "warning");
            var attendId = $('#staticBackdropattendId').text();
            console.log("attendId: " + attendId);
            $.ajax({
                url: "/ixercise/courseAttendee/updateStatusById/" + attendId + "/" + 3,
                type: "PUT",
                // contentType:"application/json",
                // data: JSON.stringify({
                //     attendId: attendId,
                //     status: 3
                // }),
                dataType: "json",
                success: function (data) {
                    console.log("resp>>" + data);
                    swal("Success!", data.message, "warning");
                    $('#staticBackdropPass').modal('hide');
                    joinApplyUnchecked();
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });


        // <<學員退出活動申請>>>>1.參加待審核2.通過3.未通過4:退出待審核5:退出成功>>>>>>>>>>>>>>>>>>>>>>>>
        //已審核
        $('#leave1').on('click', function (e) {
            console.log("leave1>>" + this);
            swal("Warning!", "此列表退出審核已完成，僅供查看!", "warning");
            // 表頭
            $('#th1').text("會員名稱");
            $('#th2').text("課程名稱");
            $('#th3').text("報名時間");
            $('#th4').text("參加原因");
            $('#th5').text("status");
            $('#th6').text("付款狀態");
            $('#th7').text("attendId");
            let appendaudit1head1 = '';
            let appendaudit1head2 = '';
            appendaudit1head1 += `<label for="" class="form-label">審核狀態:</label>`;
            appendaudit1head2 += `<select class="form-select" aria-label="Default select example">
                                        <option selected value="5">已審核</option>
                                    </select>`;
            $('#selecthead1').empty().append(appendaudit1head1);
            $('#selecthead2').empty().append(appendaudit1head2);
            $.ajax({
                url: "/ixercise/courseAttendee/status/" + 5, //5:退出成功
                type: "GET",
                dataType: "json",
                success: async function (resp) {
                    console.log("退出活動申請已審核resp>>" + resp);
                    console.log("resp.length>>" + resp.length);
                    let appendaudit2 = '';
                    if (resp[0].successful) {
                        for (let i in resp) {
                            let reason = resp[i].reason;
                            let truncatedReason = reason.length > 10 ? reason.substring(0, 10) + "..." : reason;
                            appendaudit2 += `<tr><td style="background-color:rgba(66, 184, 131, 0.5)">${Number(i) + 1}</td>`;
                            //分段接會員accountId
                            // appendaudit1 += `<td>${ resp1[i].accountId}</td>`;
                            try {
                                let accountName = await GETaccountNameById(resp[i].accountId);
                                appendaudit2 += `<td>${accountName}</td>`;
                            } catch (error) {
                                console.error(error);
                                appendaudit2 += `<td>Error retrieving</td>`;
                            }
                            //分段接課程courseId
                            // appendaudit1 += `<td>${ resp[i].courseId}</td>
                            try {
                                let eventName = await GETcourseNameById(resp[i].courseId);
                                appendaudit2 += `<td>${eventName}</td>`;
                            } catch (error) {
                                console.error(error);
                                appendaudit2 += `<td>Error retrieving</td>`;
                            }
                            appendaudit2 += `<td> ${resp[i].attendTime}</td>
                                                <td>${truncatedReason}</td>
                                                <td>${auditTypeMap[resp[i].status]}</td>
                                                <td>${resp[i].paymentStatus}</td>
                                                <td>${resp[i].attendId}</td>
                                                <td></td>
                                            </tr > `;
                        }
                    } else {
                        swal("Warning!", "沒有資料", "warning");
                    }
                    $('#aaa').empty().append(appendaudit2);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });

        //未審核
        $('#leave2').on('click', function (e) {
            console.log("leave2>>" + this);
            // swal("Warning!", "還沒寫!", "warning");
            // 表頭
            $('#th1').text("會員名稱");
            $('#th2').text("課程名稱");
            $('#th3').text("報名時間");
            $('#th4').text("參加原因");
            $('#th5').text("status");
            $('#th6').text("付款狀態");
            $('#th7').text("attendId");
            let appendaudit1head1 = '';
            let appendaudit1head2 = '';
            appendaudit1head1 += `<label for="" class="form-label">審核狀態:</label>`;
            appendaudit1head2 += `<select class="form-select" aria-label="Default select example">
                                        <option selected value="4">未審核</option>
                                    </select>`;
            $('#selecthead1').empty().append(appendaudit1head1);
            $('#selecthead2').empty().append(appendaudit1head2);

            leaveApplyUncheck();
        });

        // leaveAgreebtn
        $('#aaa').on('click', '.leaveAgreebtn', function (e) {
            // e.preventDefault();
            console.log("leaveAgreebtn");
            // var attendId = $('#staticBackdropattendId').text();
            var attendId = $(this).closest('tr').find('td:eq(7)').text();
            console.log("attendId: " + attendId);
            $.ajax({
                url: "/ixercise/courseAttendee/updateStatusById/" + attendId + "/" + 5,
                type: "PUT",
                // data: {attendId: attendId, status: 5},
                dataType: "json",
                success: function (data) {
                    console.log("resp>>" + data);
                    swal("Success!", data.message, "warning");
                    leaveApplyUncheck();
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        });


        // <<學員退出活動申請>>>>---撈出未審核
        function leaveApplyUncheck() {
            $.ajax({
                url: "/ixercise/courseAttendee/status/" + 4, //4:退出待審核
                type: "GET",
                dataType: "json",
                success: async function (resp2) {
                    console.log("退出活動申請未審核resp>>" + resp2);
                    let appendaudit2 = '';
                    console.log("退出活動申請未審核length: " + resp2.length);
                    $('#leave2bgsecondary').empty().append(resp2.length);


                    var creatorList = []; // 創建空的列表

                    $.ajax({
                        url: "/ixercise/course/creator/" + LSaccountId, //會員accountId=5
                        type: "GET",
                        dataType: "json",
                        async: false,
                        success: function (respxx) {
                            console.log("學員退出活動申請---撈出未審核 >>" + respxx);
                            // 將每個元素添加到列表中
                            for (var i = 0; i < respxx.length; i++) {
                                creatorList.push(respxx[i].courseId);
                            }
                            console.log("creatorList:", creatorList);
                        }, error: function (xhr, status, error) {
                            alert("Error: " + xhr.responseText);
                        }
                    });

                    // 篩選該教練的課
                    var resp = resp2.filter(function (item) {
                        return creatorList.includes(item.courseId);
                    });


                    if (resp[0].successful) {
                        for (let i in resp) {
                            let reason = resp[i].reason;
                            let truncatedReason = reason.length > 10 ? reason.substring(0, 10) + "..." : reason;
                            appendaudit2 += `<tr><td style="background-color:rgba(66, 184, 131, 0.5)">${Number(i) + 1}</td>`;
                            //分段接會員accountId
                            // appendaudit2 += `<td>${ resp1[i].accountId}</td>`;
                            try {
                                let accountName = await GETaccountNameById(resp[i].accountId);
                                appendaudit2 += `<td>${accountName}</td>`;
                            } catch (error) {
                                console.error(error);
                                appendaudit2 += `<td>Error retrieving</td>`;
                            }
                            //分段接課程courseId
                            // appendaudit2 += `<td>${ resp[i].courseId}</td>
                            try {
                                let eventName = await GETcourseNameById(resp[i].courseId);
                                appendaudit2 += `<td>${eventName}</td>`;
                            } catch (error) {
                                console.error(error);
                                appendaudit2 += `<td>Error retrieving</td>`;
                            }
                            appendaudit2 += `<td>${resp[i].attendTime}</td>
                                                <td>${truncatedReason}</td>
                                                <td>${auditTypeMap[resp[i].status]}</td>
                                                <td>${resp[i].paymentStatus}</td>
                                                <td>${resp[i].attendId}</td>
                                                <td><button class="btn btn-primary leaveAgreebtn">同意</button></td>
                                            </tr > `;
                        }
                    } else {
                        swal("Warning!", "沒有資料", "warning");
                    }
                    $('#aaa').empty().append(appendaudit2);
                },
                error: function (xhr, status, error) {
                    alert("Error: " + xhr.responseText);
                }
            });
        }


    });


</script>
</body>

</html>